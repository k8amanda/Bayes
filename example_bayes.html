<div id="exp">
 <h1>Bayesian Reasoning Study</h1>
</div>

<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="d3-iconarray.js"></script>

<svg height="10" width="10" xmlns="http://www.w3.org/2000/svg" version="1.1"> 
  <defs> 
    <pattern id="tstPosPat" width=".25" height=".25" patternContentUnits="objectBoundingBox">
        <rect x="0" y="0" width=".25" height=".25" fill="#eeeeee"/>
        <circle cx=".125" cy=".125" r=".05" fill="#999999"/>
    </pattern>
    <pattern id="tstPosPatLeg" width=".25" height=".25" patternContentUnits="objectBoundingBox">
        <rect x="0" y="0" width=".25" height=".25" fill="#ffffff"/>
        <circle cx=".125" cy=".125" r=".05" fill="#999999"/>
    </pattern>
    <pattern id="tstPosHivPosPat" width=".25" height=".25" patternContentUnits="objectBoundingBox">
        <rect x="0" y="0" width=".25" height=".25" fill="#ffeda0"/>
        <circle cx=".125" cy=".125" r=".05" fill="#999999"/>
    </pattern>
    <pattern id="tstPosHivNegPat" width=".25" height=".25" patternContentUnits="objectBoundingBox">
        <rect x="0" y="0" width=".25" height=".25" fill="#c2e699"/>
        <circle cx=".125" cy=".125" r=".05" fill="#999999"/>
    </pattern>
    <pattern id="tstNegPat" width="10" height="10" patternTransform="rotate(45 0 0)" patternUnits="userSpaceOnUse">
        <rect x="0" y="0" width="10" height="10" fill="#eeeeee"/>
        <line x1="0" y1="0" x2="0" y2="10" style="stroke:#999999; stroke-width:3" />
    </pattern>
    <pattern id="tstNegPatLeg" width="10" height="10" patternTransform="rotate(45 0 0)" patternUnits="userSpaceOnUse">
        <rect x="0" y="0" width="10" height="10" fill="#ffffff"/>
        <line x1="0" y1="0" x2="0" y2="10" style="stroke:#999999; stroke-width:3" />
    </pattern>
     <pattern id="tstNegHivPosPat" width="10" height="10" patternTransform="rotate(45 0 0)" patternUnits="userSpaceOnUse">
        <rect x="0" y="0" width="10" height="10" fill="#ffeda0"/>
        <line x1="0" y1="0" x2="0" y2="10" style="stroke:#999999; stroke-width:3" />
    </pattern>
     <pattern id="tstNegHivNegPat" width="10" height="10" patternTransform="rotate(45 0 0)" patternUnits="userSpaceOnUse">
        <rect x="0" y="0" width="10" height="10" fill="#c2e699"/>
        <line x1="0" y1="0" x2="0" y2="10" style="stroke:#999999; stroke-width:3" />
    </pattern>
  </defs>
</svg>

<div id="top">
    Imagine someone is going to get a test for some disease. Input percent values for the population that has the disease, accuracy of the test, and false positives to see how it is visualized.<br>
    For example, plug in the values 30%, 70%, and 15%.<br><br>
</div> 

<div id="input">
		Population with Disease:
		<input type="number" id="in1">%<br>
		Test Accuracy:
		<input type="number" id="in2">%<br>
		False Positives:
		<input type="number" id="in3">%<br><br>
		<input type="button" value="Submit" onclick="alert('Submitted');">
</div>

<div id="simple-example" style="float:left; display:block;"></div>
<div id="checkboxes" style="float:left; margin-top:10%; display:block;">
<svg height="12" width="20" id="hivPosLeg"><rect fill="#ffeda0" stroke="black" width="20px" height="12px"/></svg>
<input type="checkbox" id="hivPos" onclick="myFunction()">Disease(+)<br>
<svg height="12" width="20" id="hivNegLeg"><rect fill="#c2e699" stroke="black" width="20px" height="12px"/></svg>
<input type="checkbox" id="hivNeg" onclick="myFunction()">Disease(-)<br>
<svg height="12" width="20" id="tstPosLeg"><rect fill="url(#tstPosPatLeg)" stroke="black" width="20px" height="12px"/></svg>
<input type="checkbox" id="tstPos" onclick="myFunction()">Test(+)<br>
<svg height="12" width="20" id="tstNegLeg"><rect fill="url(#tstNegPatLeg)" stroke="black" width="20px" height="12px"/></svg>
<input type="checkbox" id="tstNeg" onclick="myFunction()">Test(-)<br>
</div>

<div id="answers" style="clear:both;"><input type="submit" value="I'm ready to see the question." onclick="question()"></div>

<div id="ansForm" style="display:none;">
	<form>
	  <input type="number" id="ans1">
	   out of 
	  <input type="number" id="ans2">
	  <br><br>
	  <input type="submit" value="Submit" onclick="validate()">
	</form> 
</div>

<script type="text/javascript">
//set numbers for pos/neg
var backColor = "#eeeeee";
var hivPosColor = "#ffeda0";
var hivNegColor = "#c2e699"; //#9ecae1";
var tstPosColor = "url(#tstPosPat) #f03b20";
var tstNegColor = "url(#tstNegPat) #eff3ff"; 
var tstPosColorLeg = "url(#tstPosPatLeg) #f03b20";
var tstNegColorLeg = "url(#tstNegPatLeg) #eff3ff"; 
var hivPosTstPosColor = "url(#tstPosHivPosPat) #fd8d3c";
var hivPosTstNegColor = "url(#tstNegHivPosPat) #addd8e"
var hivNegTstPosColor = "url(#tstPosHivNegPat) #810f7c";
var hivNegTstNegColor = "url(#tstNegHivNegPat) #6baed6";


//new array layout function 
var num_in_row = 10;
var layout = d3_iconarray.layout().width(num_in_row);
//data to be passed to layout function 
var data = d3.range(0, 100, 1);
var num_in_col = data.length / num_in_row;
//array of grid positions and data 
var grid = layout(data);
//console.log(grid); 

//box length/height 
b_len_width = 30; 

//dims of svg that holds iconarray 
var margin = {top:40, bottom:10, left:40, right:10 };
var width = b_len_width * num_in_row + margin.left + margin.right;
var height = b_len_width * num_in_col + margin.top + margin.bottom; 


//can use scale to make gaps in iconarray for readability 
    //gapSize = size between chunks
var arrayScale = d3_iconarray.scale()
    .domain([ 0, layout.maxDimension(data.length) ])
    .range([0, width-(margin.left+margin.right)])
    .gapSize(0);


function myFunction() {
    var hivPosChk = document.getElementById('hivPos').checked;
    var hivNegChk = document.getElementById('hivNeg').checked;
    var tstPosChk = document.getElementById('tstPos').checked;
    var tstNegChk = document.getElementById('tstNeg').checked;

    if(hivPosChk & !hivNegChk & !tstPosChk & !tstNegChk ) {
        draw(1);
    } else if(!hivPosChk & hivNegChk & !tstPosChk & !tstNegChk ) {
        draw(2);
    } else if(hivPosChk & hivNegChk & !tstPosChk & !tstNegChk ) {
        draw(3);
    } else if(!hivPosChk & !hivNegChk & tstPosChk & !tstNegChk ) {
        draw(4);
    } else if(!hivPosChk & !hivNegChk & !tstPosChk & tstNegChk ) {
        draw(5);
    } else if(!hivPosChk & !hivNegChk & tstPosChk & tstNegChk ) {
        draw(6);
    } else if (hivPosChk & !hivNegChk & tstPosChk & !tstNegChk ) {
        draw(7);
    } else if (hivPosChk & !hivNegChk & tstPosChk & tstNegChk ) {
        draw(8);
    } else if (hivPosChk & !hivNegChk & !tstPosChk & tstNegChk ) {
        draw(9);
    } else if (hivPosChk & hivNegChk & tstPosChk & tstNegChk ) {
        draw(10);
    } else if (hivPosChk & hivNegChk & tstPosChk & !tstNegChk ) {
        draw(11);
    } else if (hivPosChk & hivNegChk & !tstPosChk & tstNegChk ) {
        draw(12);
    } else if (!hivPosChk & hivNegChk & !tstPosChk & tstNegChk ) {
        draw(13);
    } else if (!hivPosChk & hivNegChk & tstPosChk & tstNegChk ) {
        draw(14);
    } else if (!hivPosChk & hivNegChk & tstPosChk & !tstNegChk ) {
        draw(15);
    } else {
        draw(0); 
    }  
}

var answers = {}; 

function draw(caseNum) {
    var numHivPos = document.getElementById('in1').value;
    var numHivNeg = 100 - numHivPos;
    var numHivPosTstPos = Math.floor((document.getElementById('in2').value / 100) * numHivPos);
    var numHivPosTstNeg = numHivPos - numHivPosTstPos;
    var numHivNegTstPos = Math.floor((document.getElementById('in3').value / 100) * numHivNeg);
    var numHivNegTstNeg = numHivNeg - numHivNegTstPos;
    var numTstPos = Math.floor((((numHivPosTstPos * 10) * numHivPos) + (numHivNegTstPos * numHivNeg)) / 100);
    var numTstNeg = 100 - numTstPos;

    document.getElementById('checkboxes').style.marginLeft = width; 
    document.getElementById('simple-example').innerHTML = "";

    answers.stim = "interactive";
    document.getElementById('hivPosLeg').fill = hivPosColor;
    document.getElementById('hivNegLeg').fill = hivNegColor;
    document.getElementById('tstPosLeg').fill = tstPosColorLeg;
    document.getElementById('tstNegLeg').fill = tstNegColorLeg;  

    var xColHivPos = Math.floor(numHivPos / num_in_row);
    var yColHivPos = numHivPos - (xColHivPos * 10);
    var numHPosRows = Math.floor(numHivPosTstPos / xColHivPos);
    var numHPosX = numHivPosTstPos - numHPosRows;
    var numHNegRows = Math.floor(numHivNegTstPos / (num_in_row - xColHivPos));
    var numHNegX = numHivNegTstPos - (numHNegRows * (num_in_row - xColHivPos));

    //d3 to draw the iconarray 
    var svg = d3.select('#simple-example')
            .append('svg')
                .attr('width',width)
                .attr('height',height)
            .append('g')
                .attr('transform','translate('+margin.left+','+margin.top+')');

    svg.selectAll('circle')
        .data(grid)
            .enter()
        .append('rect')
            .attr('x', function(d){ return arrayScale(d.position.x) })
            .attr('y', function(d){ return arrayScale(d.position.y) })
            .attr('width', b_len_width)
            .attr('height', b_len_width)
            .attr('fill', function(d) { if (caseNum == 0) {
                                            return backColor; 
                                        } else if (caseNum == 1) {
                                            if (d.position.x < xColHivPos) {
                                                return hivPosColor;
                                            } else if ((d.position.x == xColHivPos) & (d.position.y >= num_in_row - yColHivPos)) {
                                                return hivPosColor;
                                            } else {
                                                return backColor; 
                                            } 
                                        } else if (caseNum == 2) {
                                            if (d.position.x > xColHivPos) {
                                                return hivNegColor;
                                            } else if ((d.position.x == xColHivPos) & (d.position.y < num_in_row - yColHivPos)) {
                                                return hivNegColor;
                                            } else {
                                                return backColor;
                                            }
                                        } else if (caseNum == 3) {
                                            if (d.position.x < xColHivPos) {
                                                return hivPosColor;
                                            } else if ((d.position.x == xColHivPos) & (d.position.y >= num_in_row - yColHivPos)) {
                                                return hivPosColor;
                                            } else {
                                                return hivNegColor; 
                                            }  
                                        } else if (caseNum == 4) {
                                            if ((d.position.y < numHPosRows) & d.position.x < xColHivPos){
                                                return tstPosColor;
                                            } else if (numHPosX != 0) {
                                                if ((d.position.x == xColHivPos) & (d.position.y < num_in_row - numHPosX)) {
                                                    return tstPosColor;
                                                }
                                            }
                                            if ((d.position.y < numHNegRows) & d.position.x >= xColHivPos) {
                                                return tstPosColor;
                                            } else if (numHNegX != 0) {
                                                if ((d.position.y <= numHNegRows) & (d.position.x >= xColHivPos) & (d.position.x < num_in_row - numHNegX - 1)) {
                                                    return tstPosColor;
                                                }
                                                else {
                                                    return backColor;
                                                }
                                            }
                                        } else if (caseNum == 5) {
                                            if ((d.position.y >= numHPosRows) & d.position.x < xColHivPos){
                                                return tstNegColor;
                                            } 
                                            else if (yColHivPos != 0 & numHivPosTstNeg > ((num_in_row - numHPosRows) * xColHivPos)) {
                                                if ((d.position.x == xColHivPos) & (d.position.y >= num_in_row - yColHivPos)) {
                                                    return tstNegColor;
                                                }
                                            }
                                            if ((d.position.y > numHNegRows) & d.position.x >= xColHivPos) {
                                                return tstNegColor;
                                            } else if (numHNegX != 0) {
                                                if (d.position.y == numHNegRows & (d.position.x >= xColHivPos + numHNegX)) {
                                                    return tstNegColor;
                                                }
                                                else {
                                                    return backColor;
                                                }
                                            }
                                            else {
                                                return backColor;
                                            }
                                        } else if (caseNum == 6) {
                                            if ((d.position.y < numHPosRows) & d.position.x < xColHivPos){
                                                return tstPosColor;
                                            } else if (numHPosX != 0) {
                                                if ((d.position.x == xColHivPos) & (d.position.y < num_in_row - numHPosX)) {
                                                    return tstPosColor;
                                                }
                                            }
                                            if ((d.position.y < numHNegRows) & d.position.x >= xColHivPos) {
                                                return tstPosColor;
                                            } else if (numHNegX != 0) {
                                                if ((d.position.y <= numHNegRows) & (d.position.x >= xColHivPos) & (d.position.x < num_in_row - numHNegX - 1)) {
                                                    return tstPosColor;
                                                }
                                                else {
                                                   return tstNegColor;
                                                }
                                            }
                                        } else if (caseNum == 7) {
                                            if ((d.position.y < numHPosRows) & d.position.x < xColHivPos){
                                                return hivPosTstPosColor;
                                            } else if (numHPosX != 0) {
                                                if ((d.position.x == xColHivPos) & (d.position.y < num_in_row - numHPosX)) {
                                                    return tstPosColor;
                                                }  
                                            }
                                            if (numHivPosTstNeg != 0) {
                                                var fullBlock = Math.floor(numHivPosTstNeg / xColHivPos);
                                                var leftover = numHivPosTstNeg - (fullBlock * 10);
                                                if (d.position.x < xColHivPos & d.position.y > num_in_row - (Math.floor(numHivPosTstPos / xColHivPos))) {
                                                    return hivPosColor;
                                                } else if (leftover != 0) {
                                                    if ((d.position.x == xColHivPos) & (d.position.y >= num_in_row - yColHivPos)) {
                                                        return hivPosColor;
                                                    }
                                                }
                                            }
                                            if ((d.position.y < numHNegRows) & d.position.x >= xColHivPos) {
                                                return tstPosColor;
                                            } else if (numHNegX != 0) {
                                                if ((d.position.y <= numHNegRows) & (d.position.x >= xColHivPos) & (d.position.x < num_in_row - numHNegX - 1)) {
                                                    return tstPosColor;
                                                }
                                                else {
                                                    return backColor;
                                                }
                                            }

                                        } else if (caseNum == 8) {
                                            if ((d.position.y < numHPosRows) & d.position.x < xColHivPos){
                                                return hivPosTstPosColor;
                                            } else if (numHPosX != 0) {
                                                if ((d.position.x == xColHivPos) & (d.position.y < num_in_row - numHPosX)) {
                                                    return tstPosColor;
                                                }  
                                            }
                                            if (numHivPosTstNeg != 0) {
                                                var fullBlock = Math.floor(numHivPosTstNeg / xColHivPos);
                                                var leftover = numHivPosTstNeg - (fullBlock * 10);
                                                if (d.position.x < xColHivPos & d.position.y > num_in_row - (Math.floor(numHivPosTstPos / xColHivPos))) {
                                                    return hivPosTstNegColor;
                                                } else if (leftover != 0) {
                                                    if ((d.position.x == xColHivPos) & (d.position.y >= num_in_row - yColHivPos)) {
                                                        return hivPosTstNegColor;
                                                    }
                                                }
                                            }
                                            if ((d.position.y < numHNegRows) & d.position.x >= xColHivPos) {
                                                return tstPosColor;
                                            } else if (numHNegX != 0) {
                                                if ((d.position.y <= numHNegRows) & (d.position.x >= xColHivPos) & (d.position.x < num_in_row - numHNegX - 1)) {
                                                    return tstPosColor;
                                                }
                                                else {
                                                    return tstNegColor;
                                                }
                                            }

                                        } else if (caseNum == 9) {
                                           if ((d.position.y < numHPosRows) & d.position.x < xColHivPos){
                                                return hivPosColor;
                                            }
                                            if (numHivPosTstNeg != 0) {
                                                var fullBlock = Math.floor(numHivPosTstNeg / xColHivPos);
                                                var leftover = numHivPosTstNeg - (fullBlock * 10);
                                                if (d.position.x < xColHivPos & d.position.y > num_in_row - (Math.floor(numHivPosTstPos / xColHivPos))) {
                                                    return hivPosTstNegColor;
                                                } else if (leftover != 0) {
                                                    if ((d.position.x == xColHivPos) & (d.position.y >= num_in_row - yColHivPos)) {
                                                        return hivPosTstNegColor;
                                                    }
                                                }
                                            }
                                            if ((d.position.y > numHNegRows) & d.position.x >= xColHivPos) {
                                                return tstNegColor;
                                            } else if (numHNegX != 0) {
                                                if (d.position.y == numHNegRows & (d.position.x >= xColHivPos + numHNegX)) {
                                                    return tstNegColor;
                                                }
                                                else {
                                                    return backColor;
                                                }
                                            }
                                            else {
                                                return backColor;
                                            }

                                        } else if (caseNum == 10) {
                                            if ((d.position.y < numHPosRows) & d.position.x < xColHivPos){
                                                return hivPosTstPosColor;
                                            } else if (numHPosX != 0) {
                                                if ((d.position.x == xColHivPos) & (d.position.y < num_in_row - numHPosX)) {
                                                    return hivNegTstPosColor;
                                                }  
                                            }
                                            if (numHivPosTstNeg != 0) {
                                                var fullBlock = Math.floor(numHivPosTstNeg / xColHivPos);
                                                var leftover = numHivPosTstNeg - (fullBlock * 10);
                                                if (d.position.x < xColHivPos & d.position.y > num_in_row - (Math.floor(numHivPosTstPos / xColHivPos))) {
                                                    return hivPosTstNegColor;
                                                } else if (leftover != 0) {
                                                    if ((d.position.x == xColHivPos) & (d.position.y >= num_in_row - yColHivPos)) {
                                                        return hivPosTstNegColor;
                                                    }
                                                }
                                            }
                                            if ((d.position.y < numHNegRows) & d.position.x >= xColHivPos) {
                                                return hivNegTstPosColor;
                                            } else if (numHNegX != 0) {
                                                if ((d.position.y <= numHNegRows) & (d.position.x >= xColHivPos) & (d.position.x < num_in_row - numHNegX - 1)) {
                                                    return hivNegTstPosColor;
                                                }
                                                else {
                                                    return hivNegTstNegColor;
                                                }
                                            }                                            

                                        } else if (caseNum == 11) {
                                            if ((d.position.y < numHPosRows) & d.position.x < xColHivPos){
                                                return hivPosTstPosColor;
                                            } else if (numHPosX != 0) {
                                                if ((d.position.x == xColHivPos) & (d.position.y < num_in_row - numHPosX)) {
                                                    return tstPosColor;
                                                }  
                                            }
                                            if (numHivPosTstNeg != 0) {
                                                var fullBlock = Math.floor(numHivPosTstNeg / xColHivPos);
                                                var leftover = numHivPosTstNeg - (fullBlock * 10);
                                                if (d.position.x < xColHivPos & d.position.y > num_in_row - (Math.floor(numHivPosTstPos / xColHivPos))) {
                                                    return hivPosColor;
                                                } else if (leftover != 0) {
                                                    if ((d.position.x == xColHivPos) & (d.position.y >= num_in_row - yColHivPos)) {
                                                        return hivPosColor;
                                                    }
                                                }
                                            }
                                            if ((d.position.y < numHNegRows) & d.position.x >= xColHivPos) {
                                                return hivNegTstPosColor;
                                            } else if (numHNegX != 0) {
                                                if ((d.position.y <= numHNegRows) & (d.position.x >= xColHivPos) & (d.position.x < num_in_row - numHNegX - 1)) {
                                                    return hivNegTstPosColor;
                                                }
                                                else {
                                                    return hivNegColor;
                                                }
                                            }

                                        } else if (caseNum == 12) {
                                            if ((d.position.y < numHPosRows) & d.position.x < xColHivPos){
                                                return hivPosColor;
                                            } else if (numHPosX != 0) {
                                                if ((d.position.x == xColHivPos) & (d.position.y < num_in_row - numHPosX)) {
                                                    return hivNegColor;
                                                }  
                                            }
                                            if (numHivPosTstNeg != 0) {
                                                var fullBlock = Math.floor(numHivPosTstNeg / xColHivPos);
                                                var leftover = numHivPosTstNeg - (fullBlock * 10);
                                                if (d.position.x < xColHivPos & d.position.y > num_in_row - (Math.floor(numHivPosTstPos / xColHivPos))) {
                                                    return hivPosTstNegColor;
                                                } else if (leftover != 0) {
                                                    if ((d.position.x == xColHivPos) & (d.position.y >= num_in_row - yColHivPos)) {
                                                        return hivPosTstNegColor;
                                                    }
                                                }
                                            }
                                            if ((d.position.y < numHNegRows) & d.position.x >= xColHivPos) {
                                                return hivNegColor;
                                            } else if (numHNegX != 0) {
                                                if ((d.position.y <= numHNegRows) & (d.position.x >= xColHivPos) & (d.position.x < num_in_row - numHNegX - 1)) {
                                                    return hivNegColor;
                                                }
                                                else {
                                                    return hivNegTstNegColor;
                                                }
                                            }

                                        } else if (caseNum == 13) {
                                            if ((d.position.y < numHPosRows) & d.position.x < xColHivPos){
                                                return backColor;
                                            } else if (numHPosX != 0) {
                                                if ((d.position.x == xColHivPos) & (d.position.y < num_in_row - numHPosX)) {
                                                    return hivNegColor;
                                                }  
                                            }
                                            if (numHivPosTstNeg != 0) {
                                                var fullBlock = Math.floor(numHivPosTstNeg / xColHivPos);
                                                var leftover = numHivPosTstNeg - (fullBlock * 10);
                                                if (d.position.x < xColHivPos & d.position.y > num_in_row - (Math.floor(numHivPosTstPos / xColHivPos))) {
                                                    return tstNegColor;
                                                } else if (leftover != 0) {
                                                    if ((d.position.x == xColHivPos) & (d.position.y >= num_in_row - yColHivPos)) {
                                                        return tstNegColor;
                                                    }
                                                }
                                            }
                                            if ((d.position.y < numHNegRows) & d.position.x >= xColHivPos) {
                                                return hivNegColor;
                                            } else if (numHNegX != 0) {
                                                if ((d.position.y <= numHNegRows) & (d.position.x >= xColHivPos) & (d.position.x < num_in_row - numHNegX - 1)) {
                                                    return hivNegColor;
                                                }
                                                else {
                                                    return hivNegTstNegColor;
                                                }
                                            }


                                        } else if (caseNum == 14) {
                                            if ((d.position.y < numHPosRows) & d.position.x < xColHivPos){
                                                return tstPosColor;
                                            } else if (numHPosX != 0) {
                                                if ((d.position.x == xColHivPos) & (d.position.y < num_in_row - numHPosX)) {
                                                    return hivNegTstPosColor;
                                                }  
                                            }
                                            if (numHivPosTstNeg != 0) {
                                                var fullBlock = Math.floor(numHivPosTstNeg / xColHivPos);
                                                var leftover = numHivPosTstNeg - (fullBlock * 10);
                                                if (d.position.x < xColHivPos & d.position.y > num_in_row - (Math.floor(numHivPosTstPos / xColHivPos))) {
                                                    return tstNegColor;
                                                } else if (leftover != 0) {
                                                    if ((d.position.x == xColHivPos) & (d.position.y >= num_in_row - yColHivPos)) {
                                                        return tstNegColor;
                                                    }
                                                }
                                            }
                                            if ((d.position.y < numHNegRows) & d.position.x >= xColHivPos) {
                                                return hivNegTstPosColor;
                                            } else if (numHNegX != 0) {
                                                if ((d.position.y <= numHNegRows) & (d.position.x >= xColHivPos) & (d.position.x < num_in_row - numHNegX - 1)) {
                                                    return hivNegTstPosColor;
                                                }
                                                else {
                                                    return hivNegTstNegColor;
                                                }
                                            }


                                        } else if (caseNum == 15) {
                                            if ((d.position.y < numHPosRows) & d.position.x < xColHivPos){
                                                return tstPosColor;
                                            } else if (numHPosX != 0) {
                                                if ((d.position.x == xColHivPos) & (d.position.y < num_in_row - numHPosX)) {
                                                    return hivNegTstPosColor;
                                                }  
                                            }
                                            if (numHivPosTstNeg != 0) {
                                                var fullBlock = Math.floor(numHivPosTstNeg / xColHivPos);
                                                var leftover = numHivPosTstNeg - (fullBlock * 10);
                                                if (d.position.x < xColHivPos & d.position.y > num_in_row - (Math.floor(numHivPosTstPos / xColHivPos))) {
                                                    return backColor;
                                                } else if (leftover != 0) {
                                                    if ((d.position.x == xColHivPos) & (d.position.y >= num_in_row - yColHivPos)) {
                                                        return backColor;
                                                    }
                                                }
                                            }
                                            if ((d.position.y < numHNegRows) & d.position.x >= xColHivPos) {
                                                return hivNegTstPosColor;
                                            } else if (numHNegX != 0) {
                                                if ((d.position.y <= numHNegRows) & (d.position.x >= xColHivPos) & (d.position.x < num_in_row - numHNegX - 1)) {
                                                    return hivNegTstPosColor;
                                                }
                                                else {
                                                    return hivNegColor;
                                                }
                                            }
                                        }
                                    })
            .attr('stroke', "#000000");
}

function run() {
    myFunction();
} 

window.onload = run();

function bayes_math() {
	var sickPop = document.getElementById('in1').value/100;
	var testAcc = document.getElementById('in2').value/100;
	var falsePos = document.getElementById('in3').value/100;

	var sickCalc = (sickPop * testAcc) / ((testAcc * sickPop) + (falsePos * (1 - sickPop)));
	var sickPosTst = sickCalc.toFixed(2);

	return sickPosTst;
}

 function validate() {
        var a1 = document.getElementById("ans1");
        var a2 = document.getElementById("ans2");  
        if (a1.value == "" || a2.value == "") {
                alert("Please fill in both blanks then submit your answer.");
                question();
        } else {
                var ansFound1 = a1.value / a2.value;
                var ansFound = ansFound1.toFixed(2);
                var correct = bayes_math();
                if (ansFound == correct) {
                	alert("Correct!");
                }
                else {
                	alert("Try again...");
                	question();
                }
        } 
 }

function question() {
	var ansText =  "<br>Imagine a group of 100 patients with similar lifestyles to this person. They take the disease test, and some of their results come back positive. How many of the patients with a positive test result are actually infected with this disease?<br><br>";//<br><input type="number" id="ans1"> out of <input type="number" id="ans2">.</p><input type="submit" value="Submit" onClick=validate()>';
	document.getElementById('answers').innerHTML = ansText;
	document.getElementById('ansForm').style.display = 'block';
}

</script>   
